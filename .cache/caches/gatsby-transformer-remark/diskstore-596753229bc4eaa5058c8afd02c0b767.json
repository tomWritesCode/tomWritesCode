{"expireTime":9007200813516335000,"key":"transformer-remark-markdown-ast-162766f228a97693d97e773e7e38e447--","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"image","title":null,"url":"//images.ctfassets.net/u434ytvnd3bo/5XQ2c9F4uB37GT0jnBWrZP/79b58c210c0d4268a47e6af7f4ac4bce/Large_GIF_912x276.gif","alt":"Large GIF 912x276","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":136,"offset":135},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":136,"offset":135},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Going through a few tutorials that showed how to make a Node app that from my terminal will show me the number of downloads I have had, as well as doing the math on how long raspberryCandy has been released for. ","position":{"start":{"line":3,"column":1,"offset":137},"end":{"line":3,"column":213,"offset":349},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":137},"end":{"line":3,"column":213,"offset":349},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"I went through ","position":{"start":{"line":5,"column":1,"offset":351},"end":{"line":5,"column":16,"offset":366},"indent":[]}},{"type":"link","title":null,"url":"https://scotch.io/tutorials/scraping-the-web-with-node-js","children":[{"type":"text","value":"this article from scotch.io","position":{"start":{"line":5,"column":17,"offset":367},"end":{"line":5,"column":44,"offset":394},"indent":[]}}],"position":{"start":{"line":5,"column":16,"offset":366},"end":{"line":5,"column":104,"offset":454},"indent":[]}},{"type":"text","value":" which used NodeJS, Cheerio and request-promise.","position":{"start":{"line":5,"column":104,"offset":454},"end":{"line":5,"column":152,"offset":502},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":351},"end":{"line":5,"column":152,"offset":502},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":7,"column":1,"offset":504},"end":{"line":7,"column":4,"offset":507},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"- request-promise -","position":{"start":{"line":9,"column":3,"offset":511},"end":{"line":9,"column":22,"offset":530},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":509},"end":{"line":9,"column":24,"offset":532},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":9,"column":24,"offset":532},"end":{"line":9,"column":25,"offset":533},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Makes the HTTP request which supports promises. The extension of the standard request promise.","position":{"start":{"line":9,"column":26,"offset":534},"end":{"line":9,"column":120,"offset":628},"indent":[]}}],"position":{"start":{"line":9,"column":25,"offset":533},"end":{"line":9,"column":121,"offset":629},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":509},"end":{"line":9,"column":121,"offset":629},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"- Cheerio -","position":{"start":{"line":11,"column":3,"offset":635},"end":{"line":11,"column":14,"offset":646},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":633},"end":{"line":11,"column":16,"offset":648},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":11,"column":16,"offset":648},"end":{"line":11,"column":17,"offset":649},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Helps to traverse the DOM letting us select parts of the page we would like to extract.","position":{"start":{"line":11,"column":18,"offset":650},"end":{"line":11,"column":105,"offset":737},"indent":[]}}],"position":{"start":{"line":11,"column":17,"offset":649},"end":{"line":11,"column":106,"offset":738},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":633},"end":{"line":11,"column":106,"offset":738},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":13,"column":1,"offset":740},"end":{"line":13,"column":4,"offset":743},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Figlet is a great package for making ASCII art from text and has a library of different ways to do so. Chalk is used to colour the text of the response in the terminal which means I could keep the raspberryCandy colours being returned. ","position":{"start":{"line":15,"column":1,"offset":745},"end":{"line":15,"column":237,"offset":981},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":745},"end":{"line":15,"column":237,"offset":981},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The first part of my code is making the piece that looks after displaying when raspberryCandy was released and how many days it has been released for which sits below the number of downloads in the command line result. To do this all I used was the Date function built into Javascript, making one of the dates the release which I already knew and wasnt going to change just put it straight in. And then another date which is the date and time that the function is called.","position":{"start":{"line":17,"column":1,"offset":983},"end":{"line":17,"column":472,"offset":1454},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":983},"end":{"line":17,"column":472,"offset":1454},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":19,"column":1,"offset":1456},"end":{"line":19,"column":4,"offset":1459},"indent":[]}},{"type":"code","lang":null,"value":"const release = new Date(\"February 19, 2019 11:46:11\");\nconst current = new Date();","position":{"start":{"line":21,"column":1,"offset":1461},"end":{"line":22,"column":32,"offset":1552},"indent":[1]}},{"type":"thematicBreak","position":{"start":{"line":24,"column":1,"offset":1554},"end":{"line":24,"column":4,"offset":1557},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Following that I made a function which calculates how many days raspberryCandy has been out. The function works in two steps, firslty it subtracts the release date from the current date which then gives us the amount of time bwtween the dates but in Milliseconds (which isn't the most readable).","position":{"start":{"line":26,"column":1,"offset":1559},"end":{"line":26,"column":296,"offset":1854},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1559},"end":{"line":26,"column":296,"offset":1854},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":28,"column":1,"offset":1856},"end":{"line":28,"column":4,"offset":1859},"indent":[]}},{"type":"code","lang":null,"value":"function dateDiff() {\n    \tlet difference = current - release;\n }     ","position":{"start":{"line":30,"column":1,"offset":1865},"end":{"line":32,"column":12,"offset":1947},"indent":[1,1]}},{"type":"thematicBreak","position":{"start":{"line":34,"column":1,"offset":1949},"end":{"line":34,"column":4,"offset":1952},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Step two of the function takes the result in milliseconds and divides it by the math that converts milliseconds to days. This is wrapped in a Math.round() function to give whole days as a return without a decimal.","position":{"start":{"line":36,"column":1,"offset":1954},"end":{"line":36,"column":214,"offset":2167},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":1954},"end":{"line":36,"column":214,"offset":2167},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":39,"column":1,"offset":2170},"end":{"line":39,"column":4,"offset":2173},"indent":[]}},{"type":"code","lang":null,"value":"function dateDiff() {\n\tlet difference = current - release;\n\treturn Math.round(difference / (60 * 60 * 24 * 1000));","position":{"start":{"line":41,"column":1,"offset":2175},"end":{"line":43,"column":60,"offset":2301},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"}\n    ","position":{"start":{"line":44,"column":1,"offset":2302},"end":{"line":45,"column":5,"offset":2308},"indent":[1]}}],"position":{"start":{"line":44,"column":1,"offset":2302},"end":{"line":45,"column":5,"offset":2308},"indent":[1]}},{"type":"thematicBreak","position":{"start":{"line":46,"column":1,"offset":2309},"end":{"line":46,"column":4,"offset":2312},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now for the main party trick, scraping the marketplace page for raspberryCandy to get the number of downloads. This is where we use the request-promise package and give it the target url which in this case is the page on the Visual Studio Marketplace.","position":{"start":{"line":48,"column":1,"offset":2314},"end":{"line":48,"column":252,"offset":2565},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":2314},"end":{"line":48,"column":252,"offset":2565},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Inspecting the page prior to building this I found that the piece I was after was a span with the class name 'downloads-text'. Using Cheerio I can target the span with the right class name from the HTML document and then return it as plain text. Below I have laid out the basic structure of what it is doing. ","position":{"start":{"line":50,"column":1,"offset":2567},"end":{"line":50,"column":310,"offset":2876},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":2567},"end":{"line":50,"column":310,"offset":2876},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":52,"column":1,"offset":2878},"end":{"line":52,"column":4,"offset":2881},"indent":[]}},{"type":"code","lang":null,"value":"request-promise(URL).then(function(html) \n  {\n    cheerio(\"span.downloads-text\", html).text()\n  }","position":{"start":{"line":54,"column":1,"offset":2883},"end":{"line":57,"column":8,"offset":2996},"indent":[1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":59,"column":1,"offset":2998},"end":{"line":59,"column":4,"offset":3001},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now that we have the heavy lifting out of the way the structure comes into play. In my example I have wrapped each of the console.log() returns with the Chalk package allowing me to set the colour, in this case I am going with the Purple and Aqua colours of raspberryCandy.","position":{"start":{"line":61,"column":1,"offset":3003},"end":{"line":61,"column":274,"offset":3276},"indent":[]}}],"position":{"start":{"line":61,"column":1,"offset":3003},"end":{"line":61,"column":274,"offset":3276},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":63,"column":1,"offset":3278},"end":{"line":63,"column":4,"offset":3281},"indent":[]}},{"type":"code","lang":null,"value":"console.log(\n  chalk.hex(\"#e592faff\").bold(\" WOW! raspberryCandy has:\")\n);","position":{"start":{"line":65,"column":1,"offset":3283},"end":{"line":67,"column":7,"offset":3369},"indent":[1,1]}},{"type":"thematicBreak","position":{"start":{"line":68,"column":1,"offset":3370},"end":{"line":68,"column":4,"offset":3373},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The other extra piece is using Figlet which gives me the ASCII art, this wraps around the Cherrio function and takes the properties of what font to use, as well as the horizontal and vertical layouts. ","position":{"start":{"line":70,"column":1,"offset":3375},"end":{"line":70,"column":202,"offset":3576},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":3375},"end":{"line":70,"column":202,"offset":3576},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":72,"column":1,"offset":3578},"end":{"line":72,"column":4,"offset":3581},"indent":[]}},{"type":"code","lang":null,"value":"console.log(\n  chalk.hex(\"#00feff\")(\n    figlet.textSync($(\"span.downloads-text\", html).text(), {\n      font: \"Big\",\n      horizontalLayout: \"default\",\n      verticalLayout: \"default\"\n    })\n  )\n);","position":{"start":{"line":74,"column":1,"offset":3583},"end":{"line":82,"column":7,"offset":3816},"indent":[1,1,1,1,1,1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":83,"column":1,"offset":3817},"end":{"line":83,"column":4,"offset":3820},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now that it's all pieced together the last thing left to do was to link it to my terminal as a single command rather than having to go to the file system and run the JS file. To do this, we add a line to the top of the file which will let us add our command to the package.json.","position":{"start":{"line":85,"column":1,"offset":3822},"end":{"line":85,"column":279,"offset":4100},"indent":[]}}],"position":{"start":{"line":85,"column":1,"offset":3822},"end":{"line":85,"column":279,"offset":4100},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":87,"column":1,"offset":4102},"end":{"line":87,"column":4,"offset":4105},"indent":[]}},{"type":"code","lang":null,"value":"#!/usr/bin/env node","position":{"start":{"line":89,"column":1,"offset":4107},"end":{"line":89,"column":24,"offset":4130},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":90,"column":1,"offset":4131},"end":{"line":90,"column":4,"offset":4134},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This line will let it be triggered as a Node command and run. This will also let the next part we add to the package.json work. Inside the package.json I have added:","position":{"start":{"line":92,"column":1,"offset":4136},"end":{"line":92,"column":166,"offset":4301},"indent":[]}}],"position":{"start":{"line":92,"column":1,"offset":4136},"end":{"line":92,"column":166,"offset":4301},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":94,"column":1,"offset":4303},"end":{"line":94,"column":4,"offset":4306},"indent":[]}},{"type":"code","lang":null,"value":"\"bin\": {\n  \"raspberry\": \"./raspberryScraper.js\"\n},","position":{"start":{"line":96,"column":1,"offset":4308},"end":{"line":98,"column":7,"offset":4370},"indent":[1,1]}},{"type":"thematicBreak","position":{"start":{"line":100,"column":1,"offset":4372},"end":{"line":100,"column":4,"offset":4375},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Final step is to run ","position":{"start":{"line":102,"column":1,"offset":4377},"end":{"line":102,"column":22,"offset":4398},"indent":[]}},{"type":"emphasis","children":[{"type":"strong","children":[{"type":"text","value":"npm link","position":{"start":{"line":102,"column":25,"offset":4401},"end":{"line":102,"column":33,"offset":4409},"indent":[]}}],"position":{"start":{"line":102,"column":23,"offset":4399},"end":{"line":102,"column":35,"offset":4411},"indent":[]}}],"position":{"start":{"line":102,"column":22,"offset":4398},"end":{"line":102,"column":36,"offset":4412},"indent":[]}},{"type":"text","value":" in the terminal while in the folder. This takes the bin command, in this case ","position":{"start":{"line":102,"column":36,"offset":4412},"end":{"line":102,"column":115,"offset":4491},"indent":[]}},{"type":"emphasis","children":[{"type":"strong","children":[{"type":"text","value":"\"raspberry\"","position":{"start":{"line":102,"column":118,"offset":4494},"end":{"line":102,"column":129,"offset":4505},"indent":[]}}],"position":{"start":{"line":102,"column":116,"offset":4492},"end":{"line":102,"column":131,"offset":4507},"indent":[]}}],"position":{"start":{"line":102,"column":115,"offset":4491},"end":{"line":102,"column":132,"offset":4508},"indent":[]}},{"type":"text","value":" and then launches the command ","position":{"start":{"line":102,"column":132,"offset":4508},"end":{"line":102,"column":163,"offset":4539},"indent":[]}},{"type":"emphasis","children":[{"type":"strong","children":[{"type":"text","value":"\"./raspberryScraper.js\"","position":{"start":{"line":102,"column":166,"offset":4542},"end":{"line":102,"column":189,"offset":4565},"indent":[]}}],"position":{"start":{"line":102,"column":164,"offset":4540},"end":{"line":102,"column":191,"offset":4567},"indent":[]}}],"position":{"start":{"line":102,"column":163,"offset":4539},"end":{"line":102,"column":192,"offset":4568},"indent":[]}},{"type":"text","value":". This is similar to any short hand command like ","position":{"start":{"line":102,"column":192,"offset":4568},"end":{"line":102,"column":241,"offset":4617},"indent":[]}},{"type":"emphasis","children":[{"type":"strong","children":[{"type":"text","value":"npm run start","position":{"start":{"line":102,"column":244,"offset":4620},"end":{"line":102,"column":257,"offset":4633},"indent":[]}}],"position":{"start":{"line":102,"column":242,"offset":4618},"end":{"line":102,"column":259,"offset":4635},"indent":[]}}],"position":{"start":{"line":102,"column":241,"offset":4617},"end":{"line":102,"column":260,"offset":4636},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":102,"column":260,"offset":4636},"end":{"line":102,"column":264,"offset":4640},"indent":[]}},{"type":"emphasis","children":[{"type":"strong","children":[{"type":"text","value":"gatsby develop","position":{"start":{"line":102,"column":267,"offset":4643},"end":{"line":102,"column":281,"offset":4657},"indent":[]}}],"position":{"start":{"line":102,"column":265,"offset":4641},"end":{"line":102,"column":283,"offset":4659},"indent":[]}}],"position":{"start":{"line":102,"column":264,"offset":4640},"end":{"line":102,"column":284,"offset":4660},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":102,"column":284,"offset":4660},"end":{"line":102,"column":285,"offset":4661},"indent":[]}}],"position":{"start":{"line":102,"column":1,"offset":4377},"end":{"line":102,"column":285,"offset":4661},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":104,"column":1,"offset":4663},"end":{"line":104,"column":4,"offset":4666},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Links","position":{"start":{"line":106,"column":4,"offset":4671},"end":{"line":106,"column":9,"offset":4676},"indent":[]}}],"position":{"start":{"line":106,"column":1,"offset":4668},"end":{"line":106,"column":9,"offset":4676},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"- ","position":{"start":{"line":108,"column":5,"offset":4682},"end":{"line":108,"column":7,"offset":4684},"indent":[]}},{"type":"link","title":"Scotch.io Article","url":"https://scotch.io/tutorials/scraping-the-web-with-node-js","children":[{"type":"strong","children":[{"type":"text","value":"Scotch.io article I got most of the resources from.","position":{"start":{"line":108,"column":10,"offset":4687},"end":{"line":108,"column":61,"offset":4738},"indent":[]}}],"position":{"start":{"line":108,"column":8,"offset":4685},"end":{"line":108,"column":63,"offset":4740},"indent":[]}}],"position":{"start":{"line":108,"column":7,"offset":4684},"end":{"line":108,"column":143,"offset":4820},"indent":[]}}],"position":{"start":{"line":108,"column":1,"offset":4678},"end":{"line":108,"column":143,"offset":4820},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"- ","position":{"start":{"line":109,"column":5,"offset":4825},"end":{"line":109,"column":7,"offset":4827},"indent":[]}},{"type":"link","title":"request-promise GitHub Page","url":"https://github.com/request/request-promise","children":[{"type":"strong","children":[{"type":"text","value":"request-promise GitHub page","position":{"start":{"line":109,"column":10,"offset":4830},"end":{"line":109,"column":37,"offset":4857},"indent":[]}}],"position":{"start":{"line":109,"column":8,"offset":4828},"end":{"line":109,"column":39,"offset":4859},"indent":[]}}],"position":{"start":{"line":109,"column":7,"offset":4827},"end":{"line":109,"column":114,"offset":4934},"indent":[]}}],"position":{"start":{"line":109,"column":1,"offset":4821},"end":{"line":109,"column":114,"offset":4934},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"- ","position":{"start":{"line":110,"column":5,"offset":4939},"end":{"line":110,"column":7,"offset":4941},"indent":[]}},{"type":"link","title":"Cheerio GitHub Page","url":"https://github.com/cheeriojs/cheerio","children":[{"type":"strong","children":[{"type":"text","value":"Cheerio GitHub page","position":{"start":{"line":110,"column":10,"offset":4944},"end":{"line":110,"column":29,"offset":4963},"indent":[]}}],"position":{"start":{"line":110,"column":8,"offset":4942},"end":{"line":110,"column":31,"offset":4965},"indent":[]}}],"position":{"start":{"line":110,"column":7,"offset":4941},"end":{"line":110,"column":92,"offset":5026},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":4935},"end":{"line":110,"column":92,"offset":5026},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"- ","position":{"start":{"line":111,"column":5,"offset":5031},"end":{"line":111,"column":7,"offset":5033},"indent":[]}},{"type":"link","title":"Figlet NPM Page","url":"https://www.npmjs.com/package/figlet","children":[{"type":"strong","children":[{"type":"text","value":"Figlet NPM page","position":{"start":{"line":111,"column":10,"offset":5036},"end":{"line":111,"column":25,"offset":5051},"indent":[]}}],"position":{"start":{"line":111,"column":8,"offset":5034},"end":{"line":111,"column":27,"offset":5053},"indent":[]}}],"position":{"start":{"line":111,"column":7,"offset":5033},"end":{"line":111,"column":84,"offset":5110},"indent":[]}}],"position":{"start":{"line":111,"column":1,"offset":5027},"end":{"line":111,"column":84,"offset":5110},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"- ","position":{"start":{"line":112,"column":5,"offset":5115},"end":{"line":112,"column":7,"offset":5117},"indent":[]}},{"type":"link","title":"tomWritesCode GitHub source code","url":"https://github.com/tomWritesCode/raspberryScraper","children":[{"type":"strong","children":[{"type":"text","value":"My GitHub page of the scraper","position":{"start":{"line":112,"column":10,"offset":5120},"end":{"line":112,"column":39,"offset":5149},"indent":[]}}],"position":{"start":{"line":112,"column":8,"offset":5118},"end":{"line":112,"column":41,"offset":5151},"indent":[]}}],"position":{"start":{"line":112,"column":7,"offset":5117},"end":{"line":112,"column":128,"offset":5238},"indent":[]}}],"position":{"start":{"line":112,"column":1,"offset":5111},"end":{"line":112,"column":128,"offset":5238},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":113,"column":1,"offset":5239}}}}